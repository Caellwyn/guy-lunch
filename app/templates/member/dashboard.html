{% extends "base.html" %}

{% block title %}Locker Room - {{ member.name }}{% endblock %}

{% block body_class %}bg-stadium-grass{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    
    <!-- Top Header: "Locker Room Card" -->
    <div class="text-center mb-8 pt-4">
        <h1 class="font-jersey text-4xl md:text-6xl text-white drop-shadow-lg tracking-wider">
            <span class="text-red-600 text-stroke-white">THE LINEUP CARD</span>
        </h1>
        <p class="font-condensed text-xl text-white uppercase tracking-widest mt-2 drop-shadow-md">
            Welcome, Manager {{ member.name.split()[0] }}!
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <!-- LEFT COLUMN: The Player Card (Metal Texture) -->
        <div class="lg:col-span-5">
            <div class="texture-metal p-1 relative transform rotate-1 hover:rotate-0 transition-transform duration-300">
                <!-- Screws -->
                <div class="absolute top-2 left-2 screw-head"></div>
                <div class="absolute top-2 right-2 screw-head"></div>
                <div class="absolute bottom-2 left-2 screw-head"></div>
                <div class="absolute bottom-2 right-2 screw-head"></div>

                <div class="border-2 border-gray-400 rounded-lg p-6 h-full flex flex-col items-center text-center">
                    
                    <!-- Jersey Number Section -->
                    <div class="w-full flex justify-between items-start mb-6">
                        <div class="w-1/2 text-left">
                            <!-- Player Image Placeholder -->
                            <img src="{{ url_for('static', filename='img/player_silhouette.png') }}" 
                                 alt="Player" 
                                 class="w-32 h-auto opacity-80 mix-blend-multiply"
                                 onerror="this.style.display='none'">
                        </div>
                        <div class="w-1/2 text-right">
                            <div class="font-condensed font-bold text-blue-900 text-sm uppercase tracking-tighter">Line-up Order</div>
                            <div class="font-jersey text-8xl text-embossed leading-none">{{ position }}</div>
                        </div>
                    </div>

                    <!-- Status Plate -->
                    <div class="bg-gray-800 w-full rounded p-4 mb-6 shadow-inner border-b-2 border-gray-600">
                        <h2 class="font-jersey text-3xl text-red-500 tracking-widest animate-pulse">
                            {% if member_status == 'at_bat' %}AT THE PLATE{% endif %}
                            {% if member_status == 'on_deck' %}ON DECK{% endif %}
                            {% if member_status == 'in_hole' %}IN THE HOLE{% endif %}
                            {% if member_status == 'dugout' %}IN THE DUGOUT{% endif %}
                        </h2>
                    </div>

                    <!-- Stats Plates -->
                    <div class="w-full space-y-3">
                        <!-- Hosting Stats -->
                        <div class="bg-gray-300 rounded p-3 shadow-md border border-gray-400 flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <span class="text-2xl">âš¾</span>
                                <div class="text-left">
                                    <div class="font-condensed font-bold text-gray-700 uppercase text-xs">Home Runs (Hosted)</div>
                                    <div class="font-jersey text-xl text-gray-800">CAREER TOTAL</div>
                                </div>
                            </div>
                            <div class="font-scoreboard text-3xl text-gray-900">{{ total_hosted }}</div>
                        </div>

                        <!-- Attendance Stats -->
                        <div class="bg-gray-300 rounded p-3 shadow-md border border-gray-400 flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <span class="text-2xl">ðŸ§¢</span>
                                <div class="text-left">
                                    <div class="font-condensed font-bold text-gray-700 uppercase text-xs">Games Played</div>
                                    <div class="font-jersey text-xl text-gray-800">LUNCHES ATTENDED</div>
                                </div>
                            </div>
                            <div class="font-scoreboard text-3xl text-gray-900">{{ total_attended }}</div>
                        </div>
                    </div>

                    <!-- Quick Action Buttons -->
                    <div class="w-full mt-6 space-y-3">
                        <a href="{{ url_for('member.my_profile') }}" class="block w-full bg-blue-900 text-white font-graduate text-xl py-3 rounded shadow-lg hover:bg-blue-800 transition-colors border-2 border-white uppercase tracking-wider text-center">
                            My Profile
                        </a>
                        {% if ratable_lunch %}
                        <a href="{{ url_for('member.rate_lunch', lunch_id=ratable_lunch.id) }}" class="block w-full bg-yellow-600 text-white font-condensed py-2 rounded shadow hover:bg-yellow-500 transition-colors border border-yellow-700 uppercase text-center">
                            Rate Last Lunch
                        </a>
                        {% endif %}
                    </div>

                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN: The Scoreboard (Dark LED Texture) -->
        <div class="lg:col-span-7">
            <div class="texture-scoreboard p-6 text-yellow-400 h-full flex flex-col">
                
                <!-- Scoreboard Header -->
                <div class="border-b-2 border-gray-700 pb-4 mb-6 text-center">
                    <h2 class="font-condensed text-3xl text-white uppercase tracking-widest">Stadium Scoreboard</h2>
                    <p class="font-scoreboard text-sm text-gray-400">TUESDAY LUNCH LEAGUE // {{ next_tuesday.strftime('%b %d').upper() }}</p>
                </div>

                <!-- The Lineup Grid -->
                <div class="flex-grow space-y-4">
                    
                    <!-- 1. AT BAT -->
                    <div class="flex items-center gap-4 bg-gray-900 p-3 rounded border border-gray-700">
                        <div class="led-light active-red"></div>
                        <div class="flex-1">
                            <div class="font-condensed text-gray-500 text-xs uppercase">At Bat (Hosting This Week)</div>
                            <a href="{{ url_for('member.view_profile', member_id=lineup.at_bat.id) }}" class="font-scoreboard text-2xl text-white tracking-wide hover:text-yellow-300 transition-colors">
                                {{ lineup.at_bat.name.upper() }}
                            </a>
                            {% if upcoming_lunch and upcoming_lunch.location %}
                            <div class="font-scoreboard text-sm text-yellow-500">
                                @ {{ upcoming_lunch.location.name.upper() }}
                            </div>
                            {% endif %}
                        </div>
                        <div class="font-jersey text-4xl text-gray-700 opacity-50">1</div>
                    </div>

                    <!-- 2. ON DECK -->
                    <div class="flex items-center gap-4 bg-gray-900 p-3 rounded border border-gray-700">
                        <div class="led-light active-yellow"></div>
                        <div class="flex-1">
                            <div class="font-condensed text-gray-500 text-xs uppercase">On Deck (Next Week)</div>
                            <a href="{{ url_for('member.view_profile', member_id=lineup.on_deck.id) }}" class="font-scoreboard text-xl text-gray-300 tracking-wide hover:text-yellow-300 transition-colors">
                                {{ lineup.on_deck.name.upper() }}
                            </a>
                        </div>
                        <div class="font-jersey text-3xl text-gray-700 opacity-50">2</div>
                    </div>

                    <!-- 3. IN THE HOLE -->
                    <div class="flex items-center gap-4 bg-gray-900 p-3 rounded border border-gray-700">
                        <div class="led-light active-green"></div>
                        <div class="flex-1">
                            <div class="font-condensed text-gray-500 text-xs uppercase">In The Hole (2 Weeks Out)</div>
                            <a href="{{ url_for('member.view_profile', member_id=lineup.in_hole.id) }}" class="font-scoreboard text-xl text-gray-300 tracking-wide hover:text-yellow-300 transition-colors">
                                {{ lineup.in_hole.name.upper() }}
                            </a>
                        </div>
                        <div class="font-jersey text-3xl text-gray-700 opacity-50">3</div>
                    </div>

                </div>

                <!-- Your Projection Box -->
                <div class="mt-8 bg-blue-900 bg-opacity-30 border border-blue-800 rounded p-4 flex items-center gap-4">
                    <div class="text-3xl">âž”</div>
                    <div>
                        <div class="font-condensed text-blue-300 text-xs uppercase">Your Projected Game Date</div>
                        <div class="font-scoreboard text-xl text-white">
                            {% if estimated_hosting_date %}
                                {{ estimated_hosting_date.strftime('%B %d, %Y').upper() }}
                            {% else %}
                                TBD
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-6 grid grid-cols-2 gap-4">
                    <a href="{{ url_for('member.lineup') }}" class="bg-red-700 hover:bg-red-600 text-white font-condensed uppercase py-3 px-4 rounded text-center transition-colors border-b-4 border-red-900 active:border-b-0 active:translate-y-1">
                        View Full Lineup
                    </a>
                    <a href="{{ url_for('member.history') }}" class="bg-gray-700 hover:bg-gray-600 text-white font-condensed uppercase py-3 px-4 rounded text-center transition-colors border-b-4 border-gray-900 active:border-b-0 active:translate-y-1">
                        My Stats
                    </a>
                </div>

            </div>
        </div>
    </div>

</div>
{% endblock %}
